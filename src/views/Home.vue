<template>
  <div>
    <div class="contenedorPruebaSeccion1">
      <div class="contenedorInternoPruebaSeccion1">
        <div class="elemento elemento1">
          <div class>
            <div class="row" style="word-break: break-all; text-align: left">
              <div class="contenedorInternoContenidoPrimeraSeccion">
                <h1 class="tituloEle1">
                  Invierte
                  <br />inteligente
                </h1>
                <p
                  class="textoEle1"
                >Crece tu inversi&oacute;n de la mano de los mejores de forma autom&aacute;tica.</p>
              </div>
            </div>
          </div>
        </div>
        <div class="elemento elemento2">
          <div class="col-10 col-sm-10 col-md-12 col-lg-6" style="word-break: break-all;">
            <div class="row" style="word-break: break-all;">
              <div
                class="contenedorPruebaRegistro col-12 col-sm-12 col-md-10 col-lg-12"
                style="word-break: break-all;"
              >
                <form>
                  <h1 class="tituloRegistroPrueba">Registro</h1>
                  <input type="text" class="inputPrueba" placeholder="Nombre" required />
                  <input type="tel" class="inputPrueba" placeholder="Telefono" required />
                  <input type="text" class="inputPrueba" placeholder="Nacionalidad" required />
                  <input type="text" class="inputPrueba" placeholder="Nacionalidad" required />
                </form>
                <button class="col-11 col-sm-12 col-md-6 col-lg-5 botonPrueba">Comenzar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- inicio de 3circulos -->
    <div class="TPEcontenedorSegundaSeccionPrueba">
      <div class="divcontainer3Circulos">
        <div class="container">
          <div class="row">
            <div class="col-md-8 ml-auto mr-auto text-center" style="word-break: break-all;">
              <h1 class="col-12 TPEtitleMiddlePrueba TPEheadlineTituloPrueba">Headline</h1>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-12 col-md-12 col-lg-4 divTPEcontenedorCirculosSegundaSeccion">
              <!-- <div class="divTPEcirculoSegundaSeccionPrueba">.</div> -->
              <img
                class="divTPEcirculoSegundaSeccionPrueba"
                src="../../public/images/iconos-tpelite-01.png"
                alt
              />
              <p class="textoEle1 pTPEPaquete1">Mayor Rendimiento</p>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-4 divTPEcontenedorCirculosSegundaSeccion">
              <!-- <div class="divTPEcirculoSegundaSeccionPrueba">.</div> -->
              <img
                class="divTPEcirculoSegundaSeccionPrueba"
                src="../../public/images/iconos-tpelite-02.png"
                alt
              />
              <p class="textoEle1 pTPEPaquete2">Transparencia y control</p>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-4 divTPEcontenedorCirculosSegundaSeccion">
              <!-- <div class="divTPEcirculoSegundaSeccionPrueba">.</div> -->
              <img
                class="divTPEcirculoSegundaSeccionPrueba"
                src="../../public/images/iconos-tpelite-03.png"
                alt
              />
              <p class="textoEle1 pTPEPaquete3">Seguridad</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- final de 3circulos -->

    <!-- Reviews -->
    <div class="contenedorPruebaSeccion5">
      <div class="contenedorInternoPruebaSeccion5">
        <div class="col-md-8 col-lg-12 ml-auto mr-auto text-center" style="word-break: break-all;">
          <h1 class="col-12 TPEtitleMiddlePrueba TPEtituloReviews">Testimonios</h1>
        </div>

        <div class="container">
          <div class="row">
            <div class="col-md-10 offset-md-1">
              <div class="carousel slide blogCarousel" data-ride="carousel" id="blogCarousel">
                <ol class="carousel-indicators">
                  <li data-target="#blogCarousel" data-slide-to="0" class="active"></li>
                  <li data-target="#blogCarousel" data-slide-to="1"></li>
                  <li data-target="#blogCarousel" data-slide-to="2"></li>
                </ol>

                <div class="carousel-inner" style="box-shadow: none;">
                  <div class="carousel-item active">
                    <blockquote>
                      <div class="row">
                        <div
                          class="col-md-10 offset-md-1 d-md-flex d-block text-center text-lg-left"
                        >
                          <div class="divTPEpaquetePadreReviews">
                            <img
                              class="divTPEpaqueteHijoReviews"
                              src="https://www.tutorialrepublic.com/examples/images/clients/4.jpg"
                            />
                            <img
                              class="insignia"
                              src="../../public/images/TPEinsignia.png"
                              alt="TPelite"
                            />
                          </div>
                          <div class="feedback-text pl-3">
                            <blockquote class="comillas">
                              &nbsp;&nbsp;
                              <span
                                class="TPEparrafoReviews"
                              >Edgar Garc&iacute;a: No esperaba tener tanto retorno, la verdad sorprendido, todos los d&iacute;as veo como mi inversi&oacute;n sube, lo recomiendo ampliamente.</span>&nbsp;&nbsp;
                            </blockquote>
                          </div>
                        </div>
                      </div>
                    </blockquote>
                  </div>
                  <div class="carousel-item">
                    <blockquote>
                      <div class="row">
                        <div
                          class="col-md-10 offset-md-1 d-md-flex d-block text-center text-lg-left"
                        >
                          <div class="divTPEpaquetePadreReviews">
                            <img
                              class="divTPEpaqueteHijoReviews"
                              src="https://www.tutorialrepublic.com/examples/images/clients/3.jpg"
                            />
                            <img
                              class="insignia"
                              src="../../public/images/TPEinsignia.png"
                              alt="TPelite"
                            />
                          </div>
                          <div class="feedback-text pl-3">
                            <blockquote class="comillas">
                              &nbsp;&nbsp;
                              <span
                                class="TPEparrafoReviews"
                              >Edgar Garc&iacute;a: No esperaba tener tanto retorno, la verdad sorprendido, todos los d&iacute;as veo como mi inversi&oacute;n sube, lo recomiendo ampliamente.</span>&nbsp;&nbsp;
                            </blockquote>
                          </div>
                        </div>
                      </div>
                    </blockquote>
                  </div>
                  <div class="carousel-item">
                    <blockquote>
                      <div class="row">
                        <div
                          class="col-md-10 offset-md-1 d-md-flex d-block text-center text-lg-left"
                        >
                          <div class="divTPEpaquetePadreReviews">
                            <img
                              class="divTPEpaqueteHijoReviews"
                              src="https://s3.amazonaws.com/uifaces/faces/twitter/mantia/128.jpg"
                            />
                            <img
                              class="insignia"
                              src="../../public/images/TPEinsignia.png"
                              alt="TPelite"
                            />
                          </div>
                          <div class="feedback-text pl-3">
                            <blockquote class="comillas">
                              &nbsp;&nbsp;
                              <span
                                class="TPEparrafoReviews"
                              >Edgar Garc&iacute;a: No esperaba tener tanto retorno, la verdad sorprendido, todos los d&iacute;as veo como mi inversi&oacute;n sube, lo recomiendo ampliamente.</span>&nbsp;&nbsp;
                            </blockquote>
                          </div>
                        </div>
                      </div>
                    </blockquote>
                  </div>
                </div>
                <a class="carousel-control-prev" href="#blogCarousel" data-slide="prev">
                  <span class="fa fa-angle-left"></span>
                </a>
                <a class="carousel-control-next" href="#blogCarousel" data-slide="next">
                  <span class="fa fa-angle-right"></span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- inicio de bestTrader -->
    <!-- <div class="contenedorPruebaSeccion3">
      <div class="contenedorInternoPruebaSeccion3">
        <div class="item item1">
          <div>
            <div class="break-all TPEbestTraderTablaPrueba">
              <div class="row" style="text-align: center !important;  margin-top: 2vw;">
                <div class="col-2 col-sm-2 col-md-2 col-lg-2 contenedorCirculoTablaPrueba">
                  <img
                    class="TPEcirculoTablaPrueba"
                    src="https://www.tutorialrepublic.com/examples/images/clients/4.jpg"
                  />
                  <img
                    class="insigniaTablaPrueba"
                    src="../../public/images/TPEinsignia.png"
                    alt="TPelite"
                  />
                </div>
                <div
                  class="col-2 col-sm-2 col-md-2 col-lg-2"
                  style="word-break: break-all; padding-right: 0;"
                >
                  <p class="TPEparrafoTablaBold paddingTOPPrueba doradoPrueba">#1</p>
                </div>
                <div class="col-3 col-sm-3 col-md-3 col-lg-4 contenedorTablaTextoMiddle">
                  <p class="TPEparrafoTablaBold paddingTOPPrueba">GainsPTWS</p>
                </div>
                <div
                  class="col-3 col-sm-3 col-md-3 col-lg-2 bordevisible contenedorTablaTextoMiddle"
                >
                  <p class="TPEparrafoTabla paddingTOPPrueba">$2M</p>
                </div>
                <div class="col-2 col-sm-2 col-md-2 col-lg-2 contenedorTablaTextoMiddle">
                  <p class="TPEparrafoTabla paddingTOPPrueba">2782</p>
                </div>
              </div>
              <div class="row" style="text-align: center !important;">
                <div
                  class="col-2 col-sm-2 col-md-2 col-lg-2 contenedorCirculoTablaSecondPrueba"
                  style=" padding-top: 2vw; word-break: break-all; padding-left: 2vw;"
                >
                  <img
                    class="TPEcirculoTablaPrueba"
                    src="https://www.tutorialrepublic.com/examples/images/clients/3.jpg"
                  />
                  <img
                    class="insigniaTablaSecondPrueba"
                    src="../../public/images/TPEinsignia.png"
                    alt="TPelite"
                  />
                </div>
                <div
                  class="col-2 col-sm-2 col-md-2 col-lg-2"
                  style="word-break: break-all; padding-right: 0;"
                >
                  <p class="TPEparrafoTablaBold paddingTOPsecondPrueba doradoPrueba">#2</p>
                </div>
                <div class="col-3 col-sm-3 col-md-3 col-lg-4 contenedorTablaTextoMiddle">
                  <p class="TPEparrafoTablaBold paddingTOPsecondPrueba">GainsPTWS</p>
                </div>
                <div
                  class="col-3 col-sm-3 col-md-3 col-lg-2 bordevisible contenedorTablaTextoMiddle"
                >
                  <p class="TPEparrafoTabla paddingTOPsecondPrueba">$1M</p>
                </div>
                <div class="col-2 col-sm-2 col-md-2 col-lg-2 contenedorTablaTextoMiddle">
                  <p class="TPEparrafoTabla paddingTOPsecondPrueba">1822</p>
                </div>
              </div>
              <div class="row" style="text-align: center !important;">
                <div
                  class="col-2 col-sm-2 col-md-2 col-lg-2 contenedorCirculoTablaSecondPrueba"
                  style=" padding-top: 2vw; word-break: break-all; padding-left: 2vw; padding-bottom: 2vw;"
                >
                  <img
                    class="TPEcirculoTablaPrueba"
                    src="https://s3.amazonaws.com/uifaces/faces/twitter/mantia/128.jpg"
                  />
                  <img
                    class="insigniaTablaSecondPrueba"
                    src="../../public/images/TPEinsignia.png"
                    alt="TPelite"
                  />
                </div>
                <div
                  class="col-2 col-sm-2 col-md-2 col-lg-2"
                  style="word-break: break-all; padding-right: 0;"
                >
                  <p class="TPEparrafoTablaBold paddingTOPsecondPrueba doradoPrueba">#3</p>
                </div>
                <div class="col-3 col-sm-3 col-md-3 col-lg-4 contenedorTablaTextoMiddle">
                  <p class="TPEparrafoTablaBold paddingTOPsecondPrueba">GainsPTWS</p>
                </div>
                <div
                  class="col-3 col-sm-3 col-md-3 col-lg-2 bordevisible contenedorTablaTextoMiddle"
                >
                  <p class="TPEparrafoTabla paddingTOPsecondPrueba">$210K</p>
                </div>
                <div class="col-2 col-sm-2 col-md-2 col-lg-2 contenedorTablaTextoMiddle">
                  <p class="TPEparrafoTabla paddingTOPsecondPrueba">205</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="item item2">
          <div class="break-all">
            <div class="break-all Margen divContenedorTextoBestTraderPrueba">
              <h1 class="TPEtitleMiddlePrueba">
                <span style="color: #d0b271 ">Headline</span> text eusim
              </h1>
              <p class="textoEle1">Consectetuer adipiscing elit, sed diam nonummy nibh eusim</p>
            </div>
          </div>
        </div>
      </div>
    </div>-->
    <!-- fin de bestTrader -->

    <!-- Chart -->
    <div class="contenedorPruebaSeccion4">
      <div class="contenedorInternoPruebaSeccion4">
        <div class="container">
          <div class="row">
            <div class="col-12 col-sm-12 col-md-7 col-lg-7" style="text-align: left;">
              <!-- <div class="TPEcontenedorTituloChart">
                <h1 class="TPEtitleMiddle TPEtitleChart">Headline text eusim</h1>
              </div>-->
              <div class="TPEcontenedorTituloChartPrueba">
                <h1
                  class="TPEtitleMiddlePrueba TPEcolorChart"
                >Compara y proyecta tu inversi&oacute;n</h1>
                <p
                  class="textoEle1 TPEcolorChart"
                >Visualiza tu rendimiento seg&uacute;n el plan elegido y el monto a invertir a trav&eacute;s del tiempo.</p>
              </div>
            </div>
          </div>
          <!-- <div class="row">
            <div class="col-12 col-sm-12 col-md-7 col-lg-8" style="text-align: left;">
              <div class="TPEcontenedorParrafoChart">
                <p
                  class="TPEparrafoNormal TPEparrafoChart"
                >Consectetuer adipiscing elit, sed diam nonummy nibh eusim.</p>
              </div>
            </div>
          </div>-->
          <div class="row">
            <div class="col-md-9 col-lg-9">
              <div class="row TPEcontenedorBotonesChartROWPrueba">
                <b-button
                  class="col-12 col-sm-12 col-md-12 col-lg-2 TPEbuttonChartPrueba"
                  id="btn1"
                  @click="fnButton(1)"
                >Plan 1</b-button>
                <b-button
                  class="col-12 col-sm-12 col-md-12 col-lg-2 TPEbuttonChartPrueba"
                  id="btn2"
                  @click="fnButton(2)"
                >Plan 2</b-button>
                <b-button
                  class="col-12 col-sm-12 col-md-12 col-lg-2 TPEbuttonChartPrueba"
                  id="btn3"
                  @click="fnButton(3)"
                >Plan 3</b-button>
                <b-button
                  class="col-12 col-sm-12 col-md-12 col-lg-2 TPEbuttonChartPrueba"
                  id="btn4"
                  @click="fnButton(4)"
                >Plan 4</b-button>
              </div>
            </div>
          </div>
          <div class="row" style="margin-top: 2vw;z-index: 1;">
            <div class="col-11 col-sm-11 col-md-6 col-lg-7">
              <div class="contenedorDatosChart">
                <div class="divContainerMontoInicialPrueba">
                  <div class="divTPEmontoInicialPrueba">
                    <p class="TPEchartParrafoPrueba">Monto&nbsp;Inicial</p>
                  </div>
                  <div class="divTPEmontoCantidadPrueba">
                    <p
                      class="TPEchartParrafoPrueba"
                      style="color: #d0b271;"
                    >{{formateo.format(value1)}}</p>
                  </div>
                </div>
                <div class="divTPEcontainerSliderROWPrueba">
                  <div class="divTPEsliderChart">
                    <vs-slider
                      :color="colorx"
                      @change="fnSlider(value1, 1)"
                      v-model="value1"
                      :min="minimo1"
                      :max="maximo1"
                    />
                  </div>
                </div>
                <div class="divContainerPlazoInversionPrueba">
                  <div class="divTPEmontoInicial">
                    <p class="TPEchartParrafoPrueba">Plazo de Inversion</p>
                  </div>
                  <div class="divTPEmontoCantidad">
                    <p class="TPEchartParrafoPrueba" style="color: #d0b271;">{{value2}} a&ntilde;os</p>
                  </div>
                </div>
                <div class="divTPEcontainerSliderROWPrueba">
                  <div class="divTPEsliderChart">
                    <vs-slider
                      id="sliderAnios"
                      :color="colorx"
                      @change="fnSlider(value2, 2)"
                      v-model="value2"
                      :min="minimo2"
                      :max="maximo2"
                    />
                  </div>
                </div>

                <div class="divContainerROIRendimientoPrueba">
                  <div class="divTPEroi">
                    <ul class="ulROI">
                      <li class="liROI">ROI mensual</li>
                      <p class="cantidadROIRendimiento">{{formateo.format(ROImensual)}}</p>
                    </ul>
                  </div>
                  <div class="divTPErendimiento">
                    <ul class="ulRendimiento">
                      <li class="liRendimiento">Rendimiento anual</li>
                      <p class="cantidadROIRendimiento">{{formateo.format(RendiAnual)}}</p>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12">
              <div class="row divContainerGraficaROWinterno">
                <div
                  class="col-12 col-sm-12 col-md-12 col-lg-12 TPEcontainerGraficaInternoPrueba"
                  style="word-break: break-all;"
                >
                  <div class="centerx">
                    <div class="fill-row">
                      <div id="div-with-loading" class="vs-con-loading__container">
                        <div id="myDiv" style="width: 100%;"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- fin Chart -->
  </div>
</template>

<script>
// @ is an alias to /src
import classApi from "../services/classApi";
import classFunction from "../services/functions";
const Api = new classApi();

export default {
  name: "home",
  data() {
    return {
      formateo: classFunction.getFormatMoney(),
      percent: 0.0,
      colorx: "#d0b271",
      colorLoading: "#d0b271",
      value1: 20000,
      // value2: new Date().getFullYear() * 1 + 5,
      // minimo1: 10000,
      // maximo1: 100000,
      // minimo2: new Date().getFullYear() * 1,
      // maximo2: new Date().getFullYear() * 1 + 10,

      value2: 5,
      minimo1: 10000,
      maximo1: 100000,
      minimo2: 1,
      maximo2: 10,
      btnPlan: 1,
      tmpVal1: 0,
      tmpVal2: 0,
      tmpBtnp: 0,
      ROImensual: 0,
      RendiAnual: 0,

      gyearnow: new Date().getFullYear(),
      gyearcount: 13,
      gYearArray: []
    };
  },
  created() {
    this.setYears();
  },
  mounted() {
    this.fnButton(this.btnPlan);
  },
  methods: {
    getApiChart(a, b, c) {
      Api.getChart(a, b, c)
        .then(res => {
          console.log(res);
          if (res) {
            if (res.data) {
              if (res.data.anual) {
                this.GraphWin(res.data);
              }
            }
          }
        })
        .catch(e => {});
    },
    openLoadingInDiv() {
      this.$vs.loading({
        color: this.colorLoading,
        container: "#div-with-loading",
        scale: 0.6
      });

      setTimeout(() => {
        this.fnSend();
      }, 3000);
    },
    fnSlider(a, b) {
      switch (b) {
        case 2:
          this.value2 = a;
          break;
        default:
          this.value1 = a;
          break;
      }
    },

    fnSend() {
      this.$vs.loading.close("#div-with-loading > .con-vs-loading");
      if (
        this.tmpVal1 != this.value1 ||
        this.tmpVal2 != this.value2 ||
        this.btnPlan != this.tmpBtnp
      ) {
        this.tmpVal1 = this.value1;
        this.tmpVal2 = this.value2;
        this.tmpBtnp = this.btnPlan;

        this.getApiChart(this.value1, this.btnPlan, this.gyearcount);
      }
    },
    fnButton(a) {
      this.btnPlan = a;

      for (let i = 1; i < 6; i++) {
        if (document.getElementById("btn" + i + "")) {
          document.getElementById("btn" + i + "").style.color =
            i === a ? "#ffffff" : "#d0b271";
          document.getElementById("btn" + i + "").style.background =
            i === a ? "#d0b271" : "#ffffff";
        }
      }
      this.openLoadingInDiv();
    },
    setYears() {
      let zzz = 0;

      while (zzz < this.gyearcount + 1) {
        this.gYearArray.push(this.gyearnow + zzz);
        ++zzz;
      }
    },

    GraphWin(jsonmierd) {
      var rez = jsonmierd;
      var years = this.value2;

      var linex = this.gYearArray,
        liney2 = [0, ...rez.anual],
        liney1 = [0.0, ...rez.mensual],
        sizemarker = [];

      for (let i = 0; i < linex.length; i++) {
        sizemarker.push(i == years ? 18 : 0);
      }

      var trace1 = {
        x: linex,
        y: liney1,
        fill: "tozeroy",
        type: "scatter",
        mode: "markers",
        marker: {
          size: sizemarker
        },
        hovertemplate: "Roi Mensual: %{y:$.2f}<extra></extra>"
      };
      var trace2 = {
        x: linex,
        y: liney2,
        fill: "tonexty",
        type: "scatter",
        mode: "markers",
        marker: {
          size: sizemarker
        },
        hovertemplate: "Retorno Anual: %{y:$.2f}<extra></extra>"
      };

      var hun = {
        xaxis: {
          showgrid: false,
          showline: false,
          showticklabels: true,
          zeroline: false,
          fixedrange: true,
          tickvals: [linex[0], linex[years]],
          ticktext: ["Hoy", "Year " + this.value2]
        },
        yaxis: {
          showgrid: false,
          showline: false,
          showticklabels: false,
          zeroline: false,
          fixedrange: true
        },
        showlegend: false,
        colorway: ["rgb(213, 201, 183)", "#cea03e"]
      };

      var data = [trace1, trace2];

      Plotly.newPlot("myDiv", data, hun, {
        displaylogo: false,
        showSendToCloud: false,
        displayModeBar: false,
        responsive: true
      });
      this.ROImensual = rez.mensual[years - 1];
      this.RendiAnual = rez.anual[years - 1];
    }
  },
  updated() {
    this.openLoadingInDiv();
  }
};
</script>
